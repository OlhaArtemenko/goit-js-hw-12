{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42959666-b225ac6c9c40b570269fe0b4e';\nconst baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImagesFromPixabay(searchQuery, page, perPage) {\n  try {\n    const response = await axios.get(baseURL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import { listOfGallery, lightbox, loadMoreBtn } from '../main';\n\nexport function renderImages(array) {\n  if (array.length == 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      progressBarColor: '#FFFFFF',\n      icon: null,\n      backgroundColor: '#ef4040',\n      titleColor: '#fff',\n      messageColor: '#fff',\n    });\n  } else {\n    const markup = array\n      .map(image => {\n        return `<li class=\"image-item\">\n          <a class=\"image-link\" href=\"${image.largeImageURL}\">\n          <img class=\"image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <ul class=\"image-information-box\">\n          <li class=\"item-information\"><p><span class=\"info-title\">Likes</span></br>${image.likes}</p></li>\n          <li class=\"item-information\"><p><span class=\"info-title\">Views</span></br>${image.views}</p></li>\n          <li class=\"item-information\"><p><span class=\"info-title\">Comments</span></br>${image.comments}</p></li>\n          <li class=\"item-information\"><p><span class=\"info-title\">Downloads</span></br>${image.downloads}</p></li>\n          </ul>\n          </li >`;\n      })\n      .join('');\n    listOfGallery.insertAdjacentHTML('beforeend', markup);\n    listOfGallery.insertAdjacentElement('beforeend', loadMoreBtn);\n    lightbox.refresh();\n  }\n}\n","import { fetchImagesFromPixabay } from './js/pixabay-api';\nimport { renderImages } from './js/render-function';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst inputElement = document.querySelector('.search-input');\nexport const listOfGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 300,\n});\n\nlightbox.refresh();\n\nhideLoader();\nhideLoadMoreButton();\n\nlet searchTerm = '';\nlet currentPage = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', submitHandle);\nasync function submitHandle(event) {\n  event.preventDefault();\n  searchTerm = inputElement.value.trim();\n  currentPage = 1;\n\n  listOfGallery.innerHTML = '';\n\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n\n  hideEndMessage();\n\n  showLoader();\n  try {\n    const images = await fetchImagesFromPixabay(\n      searchTerm,\n      currentPage,\n      perPage\n    );\n    const totalHits = images.totalHits;\n\n    if (images.hits.length === 0) {\n      listOfGallery.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      hideLoadMoreButton();\n      return;\n    } else {\n      renderImages(images.hits);\n      inputElement.value = '';\n      showLoadMoreButton();\n    }\n    if (perPage * currentPage >= totalHits) {\n      hideLoadMoreButton();\n      showEndMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    if (loadMoreBtn) {\n      currentPage += 1;\n    }\n    const images = await fetchImagesFromPixabay(\n      searchTerm,\n      currentPage,\n      perPage\n    );\n    const totalHits = images.totalHits;\n\n    renderImages(images.hits);\n    showLoader();\n    if (currentPage * perPage >= totalHits) {\n      hideLoadMoreButton();\n      showEndMessage();\n    }\n    const galleryCardHeight =\n      listOfGallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryCardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\nfunction showEndMessage() {\n  const endMessage = document.createElement('p');\n  endMessage.style.display = 'flex';\n  endMessage.style.alignItems = 'center';\n  endMessage.style.justifyContent = 'center';\n\n  endMessage.style.margin = '20px auto';\n  endMessage.classList.add('end-message');\n  endMessage.textContent =\n    \"We're sorry, but you've reached the end of search results.\";\n  listOfGallery.insertAdjacentElement('beforeend', endMessage);\n}\n"],"names":["API_KEY","baseURL","fetchImagesFromPixabay","searchQuery","page","perPage","axios","error","renderImages","array","markup","image","listOfGallery","loadMoreBtn","lightbox","form","inputElement","loader","SimpleLightbox","hideLoader","hideLoadMoreButton","searchTerm","currentPage","submitHandle","event","iziToast","hideEndMessage","showLoader","images","totalHits","showLoadMoreButton","showEndMessage","galleryCardHeight","endMessage"],"mappings":"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"}